// jQuery.validator.addMethod("unique", function(value, element) {
//     var selector = jQuery.validator.format(value, element.name);
//     var matches = new Array();
//     $(selector).each(function(index, item) {
//         if (value == $(item).val()) {
//             matches.push(item);
//         }
//     });

//     return matches.length == 0;
// }, "Value is not unique.");


function initializeGroupValidations() {
  $('#edit-group-form').validate({
    rules: {
      'movement[name]': {required: true}
    },
    messages: {
      'movement[name]': "Name is required"
    },

    errorElement: "div",
    errorClass: "text-danger",
    errorId: "event_error",
    errorPlacement: function (error, element) {
      error.insertAfter(element);
      element.closest('div').addClass('has-error');
    },
    success: function (label) {
        label.closest('.form-group').removeClass('has-error').addClass('has-success');
        label.next('.help-block').hide();
    }
  });
};

$("#group").html("<%= escape_javascript(render partial: 'movements/tab_groups', group: @group)%>");
$("#events").html("<%= escape_javascript(render partial: 'movements/tab_group_events', events: @group.events)%>");
$("#support").html("<%= escape_javascript(render partial: 'movements/tab_group_attendees', events: @group.events)%>");
sorttable.makeSortable(document.getElementById('group-events-table'));
sorttable.makeSortable(document.getElementById('group-attendees-table'));
initializeGroupValidations();
